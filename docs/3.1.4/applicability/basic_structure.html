

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.4. Basic structure &mdash; RSMP Specification 3.1.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Change log" href="../changelog.html" />
    <link rel="prev" title="4.3. Transport of data" href="transport_of_data.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> RSMP Specification
          

          
          </a>

          
            
            
              <div class="version">
                3.1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../definitions.html">1. Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">2. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../purpose.html">3. Purpose</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../applicability.html">4. Applicability</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scope.html">4.1. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="object_model.html">4.2. Object model</a></li>
<li class="toctree-l2"><a class="reference internal" href="transport_of_data.html">4.3. Transport of data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.4. Basic structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#alarm-messages">4.4.1. Alarm messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#message-structure">4.4.1.1. Message structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-exchange-between-site-and-supervision-system">4.4.1.2. Message exchange between site and supervision system</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#aggregated-status-message">4.4.2. Aggregated status message</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">4.4.2.1. Message structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">4.4.2.2. Message exchange between site and supervision system</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#status-messages">4.4.3. Status Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">4.4.3.1. Message structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-exchange-between-site-and-supervision-system-other-equipment-request">4.4.3.2. Message exchange between site and supervision system/other equipment - request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-exchange-between-site-and-supervision-system-other-equipment-subscription">4.4.3.3. Message exchange between site and supervision system/other equipment - subscription</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#command-messages">4.4.4. Command messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">4.4.4.1. Message structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-exchange-between-site-and-supervision-system-other-equipment">4.4.4.2. Message exchange between site and supervision system/other equipment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#message-acknowledgement">4.4.5. Message acknowledgement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#message-structure-message-acknowledgement">4.4.5.1. Message structure – Message acknowledgement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-structure-message-not-acknowledged">4.4.5.2. Message structure – Message not acknowledged</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">4.4.5.3. Message exchange between site and supervision system/other equipment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rsmp-sxl-version">4.4.6. RSMP/SXL Version</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">4.4.6.1. Message structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#watchdog">4.4.7. Watchdog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">4.4.7.1. Message structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">4.4.7.2. Message exchange between site and supervision system/other equipment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">5. Change log</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/sxl.html">1. Signal Exchange List</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RSMP Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../applicability.html">4. Applicability</a> &raquo;</li>
        
      <li>4.4. Basic structure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/applicability/basic_structure.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basic-structure">
<span id="id1"></span><h1>4.4. Basic structure<a class="headerlink" href="#basic-structure" title="Permalink to this headline">¶</a></h1>
<p>Unicode (ISO 10646) and UTF-8 are used for all messages. Please note that
the JSon elements are formatted as JSon string elements and not as JSon
number elements or as JSon boolean elements, with the exception of the
message type “aggregated status” where JSon boolean elements are used.</p>
<p>The reason why JSon string elements are heavily used is to simplify
deserialisation of values where the data type in unknown before casting is
performed, for instance for the values in “return values”. Parsing is
recommended to be performed case insensitive.</p>
<p>Empty values are sent as <strong>“”</strong> for simple values and as <strong>[]</strong> for arrays.
Optional values can be omitted, but can not be sent as <strong>null</strong> unless
otherwise stated.</p>
<p>In the following example the message type is an alarm message.</p>
<div class="highlight-json notranslate" id="json-basic"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;E68A0010-C336-41ac-BD58-5C80A72C7092&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;F+40100=416CG100&quot;</span><span class="p">,</span>
    <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;23055&quot;</span><span class="p">,</span>
    <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860SG001&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A001&quot;</span><span class="p">,</span>
    <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;Serious lamp error&quot;</span><span class="p">,</span>
    <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;3143&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Issue&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ack&quot;</span><span class="p">:</span> <span class="s2">&quot;notAcknowledged&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aS&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span>
    <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="s2">&quot;notSuspended&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2009-10-01T11:59:31.571Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;cat&quot;</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;pri&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;rvs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;color&quot;</span><span class="p">,</span>
            <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 2: An RSMP message</p>
<p>The following table is describing the variable content of all message types.</p>
<div class="figure align-center" id="table-variable-content">
<center><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="28%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mType</td>
<td>rSMsg</td>
<td>RSMP identifier</td>
</tr>
<tr class="row-odd"><td rowspan="13">type</td>
<td>Alarm</td>
<td>Alarm message</td>
</tr>
<tr class="row-even"><td>AggregatedStatus</td>
<td>Aggregated status message</td>
</tr>
<tr class="row-odd"><td>StatusRequest</td>
<td>Status message. Request status</td>
</tr>
<tr class="row-even"><td>StatusResponse</td>
<td>Status message. Status response</td>
</tr>
<tr class="row-odd"><td>StatusSubscribe</td>
<td>Status message. Start subscription</td>
</tr>
<tr class="row-even"><td>StatusUpdate</td>
<td>Status message. Update of status</td>
</tr>
<tr class="row-odd"><td>StatusUnsubscribe</td>
<td>Status message. End subscription</td>
</tr>
<tr class="row-even"><td>CommandRequest</td>
<td>Command message. Request command</td>
</tr>
<tr class="row-odd"><td>CommandResponse</td>
<td>Command message. Response of command</td>
</tr>
<tr class="row-even"><td>MessageAck</td>
<td>Message acknowledegment. Successful</td>
</tr>
<tr class="row-odd"><td>MessageNotAck</td>
<td>Message acknowledegment. Unsuccessful</td>
</tr>
<tr class="row-even"><td>Version</td>
<td>RSMP / SXL version message</td>
</tr>
<tr class="row-odd"><td>Watchdog</td>
<td>Watchdog message</td>
</tr>
<tr class="row-even"><td>mId
<em>(or)</em>
oMId</td>
<td><em>(GUID)</em></td>
<td><p class="first">Message identity. Generated as a GUID
(Globally unique identifier) in the
equipment that sent the message. Only
version 4 of Leach-Salz UUID is used.</p>
<ul class="last simple">
<li><strong>mId</strong> is used i all messages as a
reference for the message ack</li>
<li><strong>oMId</strong> is used in the message ack
to refer to the message which is
being acked</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.2:</strong> Variable content</span></p>
<span class="target" id="table-variable-content"></span></center></div><p>The following table describes the variable content in all message types
which is defined by the signal exchange list (SXL), except version
messages, message acknowledgement messages and watchdog messages.</p>
<p>The <em>SXL element</em> column describes the correlation between the JSon
elements and the titles in the SXL.</p>
<div class="figure align-center" id="table-variable-content-sxl">
<center><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="7%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ntsOId</td>
<td>NTSObjectId</td>
<td>Component id for the NTS object which the  message is referring to.</td>
</tr>
<tr class="row-odd"><td>xNId</td>
<td>externalNtsId</td>
<td>Identity for the NTS object in communcation between NTS and other systems. The format is 5 integers. Defined in cooperation with representatives from NTS. Unique for the site.</td>
</tr>
<tr class="row-even"><td>cId</td>
<td>componentId</td>
<td>Component id for the object which the message is referring to.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.3:</strong> Variable content defined by SXL</span></p>
<span class="target" id="table-variable-content-sxl"></span></center></div><div class="section" id="alarm-messages">
<span id="id2"></span><h2>4.4.1. Alarm messages<a class="headerlink" href="#alarm-messages" title="Permalink to this headline">¶</a></h2>
<p>An alarm message is sent to the supervision system when:</p>
<ul class="simple">
<li>An alarm becomes active / inactive</li>
<li>An alarm is acknowledged</li>
<li>An alarm is being suspended / un-suspended</li>
</ul>
<p>An acknowledgment of an alarm does not cause a single alarm event to
be acknowledged but all alarm events for the specific object with the
associated alarm code id. This approach simplifies both in
implementation but also in handling - if many alarms occur on the same
equipment with short time intervals.</p>
<p>A suspend of an alarm causes all alarms from the specific object with
the associated alarm code id to be suspended. This means that alarm messages
stops being sent from the site as long as the suspension is active. As soon
as the suspension is inactivated alarms can be sent again.</p>
<p>Suspending alarms does not affect alarm acknowledgment. This means that
when unsuspending an alarm an alarm can be inactive and not acknowledged.</p>
<p>Alarm messages are event driven and sent to the supervision system
when the alarm occurs. Acknowledgement of alarms and alarm suspend
messages are interaction driven.</p>
<p>Alarm events are referring to ‘active’ (aSp:Issue), ‘suspended’ (aSp:Suspend)
and ‘acknowledged’ (aSp:Acknowledged).</p>
<p>The timestamp (aTs) reflects the individual event according to the
element ‘aSp’.</p>
<div class="section" id="message-structure">
<h3>4.4.1.1. Message structure<a class="headerlink" href="#message-structure" title="Permalink to this headline">¶</a></h3>
<div class="section" id="structure-for-an-alarm-message">
<span id="id3"></span><h4>4.4.1.1.1. Structure for an alarm message<a class="headerlink" href="#structure-for-an-alarm-message" title="Permalink to this headline">¶</a></h4>
<p>An alarm message has the structure according to the example below.</p>
<div class="highlight-json notranslate" id="json-alarm-issue"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;E68A0010-C336-41ac-BD58-5C80A72C7092&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;F+40100=416CG100&quot;</span><span class="p">,</span>
    <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;23055&quot;</span><span class="p">,</span>
    <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860SG001&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A001&quot;</span><span class="p">,</span>
    <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;Serious lamp error&quot;</span><span class="p">,</span>
    <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;3143&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Issue&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ack&quot;</span><span class="p">:</span> <span class="s2">&quot;notAcknowledged&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aS&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span>
    <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="s2">&quot;notSuspended&quot;</span><span class="p">,</span>
    <span class="nt">&quot;aTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2009-10-01T11:59:31.571Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;cat&quot;</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;pri&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;rvs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;color&quot;</span><span class="p">,</span>
            <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 3: An alarm message</p>
<p>The following table describes the variable content of the message which is
defined by the SXL.</p>
<p>The <em>SXL element</em> column describes the correlation between the JSon
elements and the titles in the signal exchange list (SXL).</p>
<div class="figure align-center" id="table-alarm">
<center><table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="10%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>aCId</td>
<td>alarmCodeId</td>
<td>Alarm suffix with in combination with the component id identifies an alarm. The examples in this document are defined according to the following format: <em>Ayyy</em>, where <em>yyy</em> is a unique number.</td>
</tr>
<tr class="row-odd"><td>xACId</td>
<td>externalAlarmCodeId</td>
<td>Manufacturer specific alarm code and alarm description. Manufacturer, model, alarm code och additional alarm description.</td>
</tr>
<tr class="row-even"><td>xNACId</td>
<td>externalNtsAlarmCodeId</td>
<td>Alarm code in order to identify alarm type during communication with NTS</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.4:</strong> Alarm message</span></p>
<span class="target" id="table-alarm"></span></center></div><p>The following table describes additional variable content of the message.</p>
<div class="figure align-center" id="table-alarm-status-change">
<center><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="20%" />
<col width="20%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Origin</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="6">aSp</td>
<td>Issue</td>
<td>Site</td>
<td>An alarm becomes active/inactive.</td>
</tr>
<tr class="row-odd"><td rowspan="2">Acknowledge</td>
<td>Supervision system</td>
<td>Acknowledge an alarm</td>
</tr>
<tr class="row-even"><td>Site</td>
<td>An alarm becomes acknowledged.</td>
</tr>
<tr class="row-odd"><td rowspan="2">Suspend</td>
<td>Supervision system</td>
<td>Suspend an alarm</td>
</tr>
<tr class="row-even"><td>Site</td>
<td>An alarm becomes suspended/unsuspended</td>
</tr>
<tr class="row-odd"><td>Resume</td>
<td>Supervision system</td>
<td>Unsuspend an alarm</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.5:</strong> Alarm status change</span></p>
<span class="target" id="table-alarm-status-change"></span></center></div></div>
<div class="section" id="alarm-status">
<span id="id4"></span><h4>4.4.1.1.2. Alarm status<a class="headerlink" href="#alarm-status" title="Permalink to this headline">¶</a></h4>
<p>Alarm status are only used by alarm messages (not by alarm acknowledgement
or alarm suspend messages).</p>
<div class="figure align-center" id="table-alarm-status">
<center><table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="16%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">ack</td>
<td>Acknowledged</td>
<td>The alarm is acknowledged</td>
</tr>
<tr class="row-odd"><td>notAcknowledged</td>
<td>The alarm is not acknowledged</td>
</tr>
<tr class="row-even"><td rowspan="2">aS</td>
<td>inActive</td>
<td>The alarm is inactive</td>
</tr>
<tr class="row-odd"><td>Active</td>
<td>The alarm is active</td>
</tr>
<tr class="row-even"><td rowspan="2">sS</td>
<td>suspended</td>
<td>The alarm is suspended</td>
</tr>
<tr class="row-odd"><td>notSuspended</td>
<td>The alarm is not suspended</td>
</tr>
<tr class="row-even"><td>aTs</td>
<td><em>(timestamp)</em></td>
<td><p class="first">Timestamp for when the alarm changes status.
See the contents of aSp to determine which type of timetamp is used</p>
<div class="line-block">
<div class="line">- aSp: Issue: Timestamp for when the alarm gets <strong>active</strong> or <strong>inactive</strong></div>
<div class="line">- aSp: Acknowledge: Timestamp for when the alarm gets <strong>acknowledged</strong> or
<strong>not acknowledged</strong></div>
<div class="line">- aSp: Suspend: Timestamp for when the alarm gets <strong>suspended</strong> or
<strong>not suspended</strong></div>
</div>
<p class="last">The timestamp uses the W3C XML <strong>dateTime</strong> definition with 3 decimal places.
All timestamps are set at the local level (and not in the supervision system) when
the alarm occurs (and not when the message is sent). All timestamps uses UTC.</p>
</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.6:</strong> Alarm status</span></p>
<span class="target" id="table-alarm-status"></span></center></div><p>The following table describes the variable content of the message which is
defined by the SXL.</p>
<p>The <em>SXL element</em> column describes the correlation between the JSon
elements and the titles in the signal exchange list (SXL).</p>
<div class="figure align-center" id="table-alarm-status-details-sxl">
<center><table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="16%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>cat</td>
<td>category</td>
<td><p class="first">A character, either <strong>T</strong> or <strong>D</strong>.</p>
<div class="line-block">
<div class="line">An alarm belongs to one of these categories:</div>
<div class="line">- T.&nbsp;Traffic alarm</div>
<div class="line">- D.&nbsp;Technical alarm</div>
</div>
<p><strong>Traffic alarm:</strong>
Traffic alarms indicate events in the traffic related functions or the technical
processes that effects traffic.</p>
<div class="line-block">
<div class="line">A couple of examples from a tunnel:</div>
<div class="line">- Stopped vehicle</div>
<div class="line">- Fire alarm</div>
<div class="line">- Error which affects message to motorists</div>
<div class="line">- High level of <span class="math notranslate nohighlight">\(CO_{2}\)</span> in traffic room</div>
<div class="line">- Etc.</div>
</div>
<p class="last"><strong>Technical alarm:</strong>
Technical alarms are alarms that do not directly affect the traffic. One example
of a technical alarm is when an impulse fan stops working.</p>
</td>
</tr>
<tr class="row-odd"><td><em>(not sent)</em></td>
<td>description</td>
<td><p class="first">Description of the alarm. Defined in SXL but is never actually sent.
The format of the description is free of choice but has the following
requirements:</p>
<ul class="last simple">
<li>The text is unique for the object type</li>
<li>The text is defined in cooperation with the Purchaser before use</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>pri</td>
<td>priority</td>
<td><p class="first">The priority of the alarm.
The following values are defined:</p>
<ol class="last arabic simple">
<li>Alarm that requires immediate action.</li>
<li>Alarm that does not require immediate action, but action is planned during
the next work shift.</li>
<li>Alarm that will be corrected during the next planned maintenance shift.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.7:</strong> Alarm status details defined by SXL</span></p>
<span class="target" id="table-alarm-status-details-sxl"></span></center></div></div>
<div class="section" id="return-values">
<span id="id5"></span><h4>4.4.1.1.3. Return values<a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h4>
<p>Return values (“rvs”) are used by alarm messages (but not by alarm
acknowledgment or alarm suspend messages) and is always sent but can
be empty (i.e. <strong>[]</strong>) if no return values are defined.</p>
<div class="figure align-center" id="table-alarm-return">
<center><table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="13%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>rvs</td>
<td><em>(array)</em></td>
<td>Return values. Contains the element <strong>n</strong> and <strong>v</strong> in an array</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.8:</strong> Alarm return values</span></p>
<span class="target" id="table-alarm-return"></span></center></div><p>The following table describes the content for each return value which is
defined by the signal exchange list (SXL).</p>
<p>The <em>SXL element</em> column describes the correlation between the JSon
elements and the titles in the SXL.</p>
<div class="figure align-center" id="table-alarm-return-values">
<center><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="24%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>n</td>
<td>name</td>
<td>Unique reference of the value</td>
</tr>
<tr class="row-odd"><td><em>(not sent)</em></td>
<td>type</td>
<td><p class="first">The data type of the value.
Defined in the SXL but is not actually sent</p>
<div class="line-block">
<div class="line">General definition:</div>
<div class="line"><strong>string</strong>: Text information</div>
<div class="line"><strong>integer</strong>: Numerical value
(16-bit signed integer), [-32768 – 32767]</div>
<div class="line"><strong>long</strong>: Numerical value
(32-bit signed long)</div>
<div class="line"><strong>real</strong>: Float
(64-bit double precision floating point)</div>
<div class="line"><strong>boolean</strong>: Boolean data type</div>
<div class="line"><strong>base64</strong>: Binary data expressed in
base64 format according to RFC-4648</div>
</div>
<p class="last">Point (“.”) is always used as decimal mark</p>
</td>
</tr>
<tr class="row-even"><td>v</td>
<td>value</td>
<td>Value from equipment</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.9:</strong> Alarm return value defined by SXL</span></p>
<span class="target" id="table-alarm-return-values"></span></center></div></div>
<div class="section" id="structure-for-alarm-acknowledgement-message">
<span id="alarmmessages-ack"></span><h4>4.4.1.1.4. Structure for alarm acknowledgement message<a class="headerlink" href="#structure-for-alarm-acknowledgement-message" title="Permalink to this headline">¶</a></h4>
<p>An alarm acknowledgement message has the structure according to the example
below.</p>
<div class="highlight-json notranslate" id="json-alarm-ack"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;3d2a0097-f91c-4249-956b-dac702545b8f&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860VA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A004&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Acknowledge&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 4: An alarm acknowledgement message which acknowledges an alarm</p>
<p>An alarm acknowledgement response message has the structure according to the
example below.</p>
<div class="highlight-json notranslate" id="json-alarm-ack-resp"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;f6843ac0-40a0-424e-8ddf-d109f4cfe487&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860VA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A004&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Acknowledge&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ack&quot;</span><span class="p">:</span> <span class="s2">&quot;Acknowledged&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aS&quot;</span><span class="p">:</span> <span class="s2">&quot;Active&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="s2">&quot;notSuspended&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-05-29T08:55:04.691Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cat&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span>
     <span class="nt">&quot;pri&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
     <span class="nt">&quot;rvs&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;Temp&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;-18.5&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 5: Response of an alarm acknowledgement message</p>
</div>
<div class="section" id="structure-for-alarm-suspend-message">
<span id="alarmmessages-suspend"></span><h4>4.4.1.1.5. Structure for alarm suspend message<a class="headerlink" href="#structure-for-alarm-suspend-message" title="Permalink to this headline">¶</a></h4>
<p>An alarm suspend message has the structure according to the example below.</p>
<div class="highlight-json notranslate" id="json-alarm-suspend"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;b6579d6d-3a9d-4169-b777-f094946a863e&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860VA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A004&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Suspend&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 6: Suspending an alarm using an alarm suspend message</p>
<div class="highlight-json notranslate" id="json-alarm-suspend-response"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;2ea7edfc-8e3a-4765-85e7-db844c4702a0&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860VA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A004&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Suspend&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ack&quot;</span><span class="p">:</span> <span class="s2">&quot;Acknowledged&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aS&quot;</span><span class="p">:</span> <span class="s2">&quot;Active&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="s2">&quot;Suspended&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-05-29T08:56:25.390Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cat&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span>
     <span class="nt">&quot;pri&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
     <span class="nt">&quot;rvs&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;Temp&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;-18.5&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 7: Response of alarm suspend message</p>
<div class="highlight-json notranslate" id="json-alarm-resume"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;2a744145-403a-423f-ba80-f38e283a778e&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860VA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A004&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Resume&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 8: Resuming an alarm using an alarm suspend message</p>
<div class="highlight-json notranslate" id="json-alarm-resume-response"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;3313526e-b744-434a-b4dd-0cfa956512e0&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+84001=860VA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A004&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;Suspend&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ack&quot;</span><span class="p">:</span> <span class="s2">&quot;Acknowledged&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aS&quot;</span><span class="p">:</span> <span class="s2">&quot;Active&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="s2">&quot;notSuspended&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-05-29T08:58:28.166Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cat&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span>
     <span class="nt">&quot;pri&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
     <span class="nt">&quot;rvs&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;Temp&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;-18.5&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 9: Response of a resume message</p>
<p>Allowed content in alarm suspend message is the same as for alarm messages
(See <a class="reference internal" href="#structure-for-an-alarm-message"><span class="std std-ref">Structure for an alarm message</span></a>) with the exception for alarm status
(See <a class="reference internal" href="#alarm-status"><span class="std std-ref">Alarm status</span></a>) and (See <a class="reference internal" href="#return-values"><span class="std std-ref">Return values</span></a>).</p>
</div>
</div>
<div class="section" id="message-exchange-between-site-and-supervision-system">
<h3>4.4.1.2. Message exchange between site and supervision system<a class="headerlink" href="#message-exchange-between-site-and-supervision-system" title="Permalink to this headline">¶</a></h3>
<p>Message acknowledgement (see section <a class="reference internal" href="#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figures.</p>
<p><strong>An alarm is active/inactive</strong></p>
<img alt="../_images/alarm_active_inactive.png" class="align-center" src="../_images/alarm_active_inactive.png" />
<ol class="arabic simple">
<li>An alarm message is sent to supervision system with the status of the alarm (the alarm is active/inactive)</li>
</ol>
<p><strong>An alarm is acknowledged at the supervision system</strong></p>
<img alt="../_images/alarm_ack_system.png" class="align-center" src="../_images/alarm_ack_system.png" />
<ol class="arabic simple">
<li>An alarm acknowledgement message is sent to the site</li>
<li>An alarm message is sent to the supervision system (that the alarm is acknowledged)</li>
</ol>
<p><strong>An alarm is acknowledged at the site</strong></p>
<img alt="../_images/alarm_ack_site.png" class="align-center" src="../_images/alarm_ack_site.png" />
<ol class="arabic simple">
<li>An alarm message is being sent to the supervision system with the status of the alarm (that the alarm is acknowledged)</li>
</ol>
<p><strong>An alarm is suspended/unsuspended from the supervision system</strong></p>
<img alt="../_images/alarm_suspend_system.png" class="align-center" src="../_images/alarm_suspend_system.png" />
<ol class="arabic simple">
<li>An alarm suspend message is being sent to the site</li>
<li>An alarm message is sent to the supervision system with the status of the alarm (that the suspension is activated/deactivated)</li>
</ol>
<p><strong>An alarm is suspended/unsuspended from the site</strong></p>
<img alt="../_images/alarm_suspend_site.png" class="align-center" src="../_images/alarm_suspend_site.png" />
<ol class="arabic simple">
<li>An alarm message is sent to the supervision system with the status of the alarm (that suspension is activated/deactivated)</li>
</ol>
</div>
</div>
<div class="section" id="aggregated-status-message">
<span id="id6"></span><h2>4.4.2. Aggregated status message<a class="headerlink" href="#aggregated-status-message" title="Permalink to this headline">¶</a></h2>
<p>This type of message is sent to the supervision system to inform about the
status of the site. The aggregated status applies to the object which is
defined by <strong>ObjectType</strong> in the signal exchange list. If no object is defined
then no aggregated status message is sent.</p>
<p>Aggregated status message are interaction driven and are sent if state
bits, functional position or functional status are changed at the site.</p>
<div class="section" id="id7">
<h3>4.4.2.1. Message structure<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>An aggregated status message has the structure according to the example
below.</p>
<div class="highlight-json notranslate" id="json-agg-status"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AggregatedStatus&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;be12ab9a-800c-4c19-8c50-adf832f22420&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;aSTS&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-06-08T08:05:06.584Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;fP&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
     <span class="nt">&quot;fS&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
     <span class="nt">&quot;se&quot;</span><span class="p">:</span> <span class="p">[</span>
             <span class="kc">true</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="kc">false</span>
           <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 10: An aggregated status message</p>
<p>The following tables are describing the variable content of the message:</p>
<div class="figure align-center" id="table-agg-basic">
<center><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="18%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>aSTS</td>
<td><em>(timestamp)</em></td>
<td>The timestamp uses the W3C XML dateTime
definition with a 3 decimal places. All
timestamps are set at the local level
(and not in the supervision system) when
the event occurs (and not when the
message is sent). All timestamps uses UTC.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.10:</strong> Aggregated status</span></p>
<span class="target" id="table-agg-basic"></span></center></div><p>The following table describes the variable content defined by the signal
exchange list (SXL). The <em>SXL element</em> column describes the correlation
between the JSon elements and the titles in the SXL.</p>
<div class="figure align-center" id="table-agg-specialisation">
<center><table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="19%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>fP</td>
<td>functionalPosition</td>
<td>Functional position. Is <strong>null</strong> if no value is defined in SXL.</td>
</tr>
<tr class="row-odd"><td>fS</td>
<td>functionalState</td>
<td>Functional state. Is <strong>null</strong> if no value is defined in SXL.</td>
</tr>
<tr class="row-even"><td>se</td>
<td>State</td>
<td>Status bits. 8 bit status bit array, where each element is
defined as either <strong>true</strong> or <strong>false</strong>.
This status bit array defines the status of the site to NTS</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.11:</strong> Aggregated status SXL content</span></p>
<span class="target" id="table-agg-specialisation"></span></center></div><div class="section" id="status-bits-state">
<h4>4.4.2.1.1. Status bits (state)<a class="headerlink" href="#status-bits-state" title="Permalink to this headline">¶</a></h4>
<p>The principle of aggregating of statuses for each bit is defined by the
associated comments in the signal exchange list (SXL). A generic
description of each bit is presented in the figure below</p>
<img alt="../_images/agg_status_bits.png" class="align-center" src="../_images/agg_status_bits.png" />
</div>
</div>
<div class="section" id="id8">
<h3>4.4.2.2. Message exchange between site and supervision system<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Message acknowledgement (see section <a class="reference internal" href="#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figures.</p>
<img alt="../_images/aggregated_status.png" class="align-center" src="../_images/aggregated_status.png" />
<p><strong>(Functional state, functional position or status bits changes at the
site)</strong></p>
<ol class="arabic simple">
<li>An aggregated status message is sent to the supervision system.</li>
</ol>
</div>
</div>
<div class="section" id="status-messages">
<h2>4.4.3. Status Messages<a class="headerlink" href="#status-messages" title="Permalink to this headline">¶</a></h2>
<p>The status message is a type of message that is sent to the
supervision system or other equipment with the status of one or more
requested objects.</p>
<p>The status message can both be interaction driven or event driver and
can be sent during the following prerequisites:</p>
<ul class="simple">
<li>When status is requested from the supervision system or other equipment.</li>
<li>According to subscription – either by using a fixed time interval or
when the status changes.</li>
</ul>
<div class="section" id="id9">
<h3>4.4.3.1. Message structure<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="section" id="structure-for-a-request-of-a-status-of-one-or-several-objects">
<h4>4.4.3.1.1. Structure for a request of a status of one or several objects<a class="headerlink" href="#structure-for-a-request-of-a-status-of-one-or-several-objects" title="Permalink to this headline">¶</a></h4>
<p>A status request message has the structure according to the example
below.</p>
<div class="highlight-json notranslate" id="json-status-req"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;StatusRequest&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;f1a13213-b90a-4abc-8953-2b8142923c55&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0003&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;inputstatus&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0003&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;extendedinputstatus&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 11: A status request message</p>
<p>The status code id (<strong>sCI</strong>) and name (<strong>n</strong>) are placed in an array
(<strong>sS</strong>) in order to enable support for requesting multiple status at once.
The following table is describing the variable content of the message.</p>
<p>The <em>SXL element</em> column describes the correlation between the JSon
elements and the titles in the SXL.</p>
<div class="figure align-center" id="table-statusrequest">
<center><table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sCI</td>
<td>statusCodeId</td>
<td>The Status code id. The examples is this document are defined according to the following format: <em>Syyy</em>, where <em>yyy</em> is a unique number.</td>
</tr>
<tr class="row-odd"><td>n</td>
<td>name</td>
<td>Unique reference of the value</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.12:</strong> Status request</span></p>
<span class="target" id="table-statusrequest"></span></center></div></div>
<div class="section" id="structure-for-a-message-with-status-of-one-or-several-objects">
<h4>4.4.3.1.2. Structure for a message with status of one or several objects<a class="headerlink" href="#structure-for-a-message-with-status-of-one-or-several-objects" title="Permalink to this headline">¶</a></h4>
<p>A message with status of one or several objects has the structure
according to the example below.</p>
<p>If the component (<strong>cId</strong>) is not known, then the site must not disconnect but
instead answer with this type of message where <strong>q</strong> is set to <strong>undefined</strong>.</p>
<div class="highlight-json notranslate" id="json-status-response"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;StatusResponse&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;0a95e463-192a-4dd7-8b57-d2c2da636584&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-06-08T09:15:18.266Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0003&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;inputstatus&quot;</span><span class="p">,</span>
             <span class="nt">&quot;s&quot;</span><span class="p">:</span> <span class="s2">&quot;100101&quot;</span><span class="p">,</span>
             <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0003&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;extendedinputstatus&quot;</span><span class="p">,</span>
             <span class="nt">&quot;s&quot;</span><span class="p">:</span> <span class="s2">&quot;100100101&quot;</span><span class="p">,</span>
             <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
         <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 12: A status response message</p>
<p>The following table is describing the variable content of the message:</p>
<div class="figure align-center" id="table-statusresponse">
<center><table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="25%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sTs</td>
<td><em>(timestamp)</em></td>
<td>Timestamp for the status. The timestamp
uses the W3C XML dateTime
definition with a 3 decimal places. All
timestamps are set at the site (and not in
the supervision system) when the status is
fetched (and not when the message is sent)
All timestamps uses UTC.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.13:</strong> Status response</span></p>
<span class="target" id="table-statusresponse"></span></center></div></div>
<div class="section" id="return-values-returnvalue">
<h4>4.4.3.1.3. Return values (returnvalue)<a class="headerlink" href="#return-values-returnvalue" title="Permalink to this headline">¶</a></h4>
<p>Return values (“sS”) are always sent but can be empty if no return values exists.</p>
<div class="figure align-center" id="table-statusresponse-returnvalues-sS">
<center><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sS</td>
<td><em>(array)</em></td>
<td>Return values. Contains the elements “sCI”, “s”, “n” and “q” in an array.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.14:</strong> Return values (returnvalue)</span></p>
<span class="target" id="table-statusresponse-returnvalues-sS"></span></center></div><div class="figure align-center" id="table-statusresponse-returnvalues">
<center><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="24%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sCI</td>
<td>statusCodeId</td>
<td>The Status code id.
The examples in this document are defined
according to the following format: <em>Syyy</em>,
where <em>yyy</em> is a unique number.</td>
</tr>
<tr class="row-odd"><td>n</td>
<td>Name</td>
<td>Unique reference of the value</td>
</tr>
<tr class="row-even"><td><em>(not sent)</em></td>
<td>Type</td>
<td><p class="first">The data type of the value.
Defined in the SXL but is not actually sent</p>
<div class="last line-block">
<div class="line">General definition:</div>
<div class="line"><strong>string</strong>: Text information</div>
<div class="line"><strong>integer</strong>: Numerical value
(16-bit signed integer), [-32768 – 32767]</div>
<div class="line"><strong>long</strong>: Numerical value
(32-bit signed long)</div>
<div class="line"><strong>real</strong>: Float
(64-bit double precision floating point)</div>
<div class="line"><strong>boolean</strong>: Boolean data type</div>
<div class="line"><strong>base64</strong>: Binary data expressed in
base64 format according to RFC-4648</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>s</td>
<td>Value</td>
<td>Value</td>
</tr>
<tr class="row-even"><td><em>(not sent)</em></td>
<td>Comment</td>
<td>Description for the status request.
Defined in the SXL but is not actually
sent.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.15:</strong> Return values (returnvalue)</span></p>
<span class="target" id="table-statusresponse-returnvalues"></span></center></div><p>The following table describes additional variable content of the message.</p>
<div class="figure align-center" id="table-statusresponse-returnvalues-qualtiy">
<center><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="24%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4">q</td>
<td>recent</td>
<td>The value is up to date</td>
</tr>
<tr class="row-odd"><td>old</td>
<td>The value is not up to date</td>
</tr>
<tr class="row-even"><td>undefined</td>
<td>The component does not exist and no
subscription will be performed.
<strong>s</strong> should be set to <strong>null</strong>.</td>
</tr>
<tr class="row-odd"><td>unknown</td>
<td>The value is unknown and no subscription will
be performed.
<strong>s</strong> should be set to <strong>null</strong>.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.16:</strong> Return value quality</span></p>
<span class="target" id="table-statusresponse-returnvalues-qualtiy"></span></center></div></div>
<div class="section" id="structure-for-a-status-subscription-request-message-on-one-or-several-objects">
<h4>4.4.3.1.4. Structure for a status subscription request message on one or several objects<a class="headerlink" href="#structure-for-a-status-subscription-request-message-on-one-or-several-objects" title="Permalink to this headline">¶</a></h4>
<p>A message with the request of subscription to a status has the
structure according to the example below. The message is used for
constructing a list of subscriptions of statuses, digital and analogue
values and events that are desirable to send to supervision system,
e.g. temperature, wind speed, power consumption, manual control.</p>
<div class="highlight-json notranslate" id="json-status-subscribe"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;StatusSubscribe&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;d6d97f8b-e9db-4572-8084-70b55e312584&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;signalgroupstatus&quot;</span><span class="p">,</span>
             <span class="nt">&quot;uRt&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;cyclecounter&quot;</span><span class="p">,</span>
             <span class="nt">&quot;uRt&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;basecyclecounter&quot;</span><span class="p">,</span>
             <span class="nt">&quot;uRt&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;stage&quot;</span><span class="p">,</span>
             <span class="nt">&quot;uRt&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 13: A status subscribe message</p>
<p>The following table is describing the variable content of the message:</p>
<div class="figure align-center" id="table-statusrequest-basic">
<center><table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>uRt</td>
<td><em>(string)</em></td>
<td>updateRate. Determines the interval of which the
message should be sent.
Defined in seconds with decimals, e.g. ”2.5” for
2.5 seconds. Dot (.) is used as decimal point. If “0”
means that the value should be sent when changed.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.17:</strong> Status Request</span></p>
<span class="target" id="table-statusrequest-basic"></span></center></div></div>
<div class="section" id="structure-for-a-response-message-with-answer-to-a-request-for-status-subscription-for-one-or-several-objects">
<h4>4.4.3.1.5. Structure for a response message with answer to a request for status subscription for one or several objects<a class="headerlink" href="#structure-for-a-response-message-with-answer-to-a-request-for-status-subscription-for-one-or-several-objects" title="Permalink to this headline">¶</a></h4>
<p>A response message with answer to a request for status subscription
has the structure according to the example below. This response is
always sent immediately after request for subscription regardless if
the value recently changed or as an effect of the interval for the
subscription. The reason for sending the response immediately is
because subscriptions usually are established shortly after RSMP
connection establishment and the supervision system needs to update
with the current statuses and events.
If an subscription is already active then the site must not establish
a new subscription but use the existing one. This message type should
not be sent if the subscription already exist.
If the object is not known then the site must not disconnect
but instead answer with this type of message where <strong>q</strong> is set to
<strong>undefined</strong>.</p>
<div class="highlight-json notranslate" id="json-status-update"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;StatusUpdate&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;dabb67f9-2601-4db9-bb8a-c7c47f57e100&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-06-08T09:33:04.735Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;signalgroupstatus&quot;</span><span class="p">,</span>
             <span class="nt">&quot;s&quot;</span><span class="p">:</span> <span class="s2">&quot;A021BC01&quot;</span><span class="p">,</span>
             <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;cyclecounter&quot;</span><span class="p">,</span>
             <span class="nt">&quot;s&quot;</span><span class="p">:</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span>
             <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;basecyclecounter&quot;</span><span class="p">,</span>
             <span class="nt">&quot;s&quot;</span><span class="p">:</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span>
             <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;stage&quot;</span><span class="p">,</span>
             <span class="nt">&quot;s&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
             <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 14: A status update message</p>
<p>The allowed content is described in Table <a href="#table-statusresponse">4.13</a> and
<a href="#table-statusresponse-returnvalues">4.15</a>.</p>
<p>Since different UpdateRate can be defined for different objects it means that partial StatusUpdates can be sent</p>
<div class="highlight-json notranslate" id="json-status-request-partial"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;StatusSubscribe&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;6bbcb26e-78fe-4517-9e3d-8bb4f972c076&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S096&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;hour&quot;</span><span class="p">,</span>
             <span class="nt">&quot;uRt&quot;</span><span class="p">:</span> <span class="s2">&quot;120&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S096&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;minute&quot;</span><span class="p">,</span>
             <span class="nt">&quot;uRt&quot;</span><span class="p">:</span> <span class="s2">&quot;60&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 15: A subscription request to subscribe to statues with different update rates</p>
<div class="highlight-json notranslate" id="json-status-request-partial-resp"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;StatusUpdate&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;b6bd7c96-f150-4756-9752-47a661e116db&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-05-29T13:47:56.740Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S096&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;minute&quot;</span><span class="p">,</span>
             <span class="nt">&quot;s&quot;</span><span class="p">:</span> <span class="s2">&quot;47&quot;</span><span class="p">,</span>
             <span class="nt">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 16: A partial status update. Only a single status is updated</p>
</div>
<div class="section" id="structure-for-a-status-unsubscription-message-on-one-or-several-objects">
<h4>4.4.3.1.6. Structure for a status unsubscription message on one or several objects<a class="headerlink" href="#structure-for-a-status-unsubscription-message-on-one-or-several-objects" title="Permalink to this headline">¶</a></h4>
<p>A message with the request of unsubscription to a status has the structure
according to the example below. The request unsubscribes on one or several
objects. No particular answer is sent for this request, other than the
usual message acknowledgement.</p>
<div class="highlight-json notranslate" id="json-status-unsubscribe"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;StatusUnsubscribe&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;5ff528c5-f2f0-4bc4-a335-280c52b6e6d8&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;sS&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;signalgroupstatus&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;cyclecounter&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;basecyclecounter&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;sCI&quot;</span><span class="p">:</span> <span class="s2">&quot;S0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;stage&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 17: A status unsubscribe message</p>
<p>The allowed content is described in Table <a href="#table-statusrequest">4.12</a></p>
</div>
</div>
<div class="section" id="message-exchange-between-site-and-supervision-system-other-equipment-request">
<h3>4.4.3.2. Message exchange between site and supervision system/other equipment - request<a class="headerlink" href="#message-exchange-between-site-and-supervision-system-other-equipment-request" title="Permalink to this headline">¶</a></h3>
<p>Message acknowledgement (see section <a class="reference internal" href="#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figure.</p>
<img alt="../_images/status_request_response.png" class="align-center" src="../_images/status_request_response.png" />
<ol class="arabic simple">
<li>Request of status for an object</li>
<li>Response with status of an object</li>
</ol>
</div>
<div class="section" id="message-exchange-between-site-and-supervision-system-other-equipment-subscription">
<h3>4.4.3.3. Message exchange between site and supervision system/other equipment - subscription<a class="headerlink" href="#message-exchange-between-site-and-supervision-system-other-equipment-subscription" title="Permalink to this headline">¶</a></h3>
<p>Message acknowledgement (see section <a class="reference internal" href="#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figure.</p>
<img alt="../_images/status_update.png" class="align-center" src="../_images/status_update.png" />
<p>Example of message exchange with subscription, status updates and unsubscription.</p>
</div>
</div>
<div class="section" id="command-messages">
<h2>4.4.4. Command messages<a class="headerlink" href="#command-messages" title="Permalink to this headline">¶</a></h2>
<p>Command messages are used to give order to do something at the site.
The site responds with a command acknowledgement.</p>
<p>Command messages are interaction driven and are sent when command are
requested on any given object by the supervision system or other equipment</p>
<div class="section" id="id10">
<h3>4.4.4.1. Message structure<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Structure of a command message request</p>
<p>A command request message has the structure according to the example
below. A command request message with the intent to change a value of the
requested object</p>
<div class="highlight-json notranslate" id="json-command-req"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;CommandRequest&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;cf76365e-9c7b-44a4-86bd-d107cdfc3fcf&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;arg&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;status&quot;</span><span class="p">,</span>
             <span class="nt">&quot;cO&quot;</span><span class="p">:</span> <span class="s2">&quot;setValue&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;YellowFlash&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;securityCode&quot;</span><span class="p">,</span>
             <span class="nt">&quot;cO&quot;</span><span class="p">:</span> <span class="s2">&quot;setValue&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;timeout&quot;</span><span class="p">,</span>
             <span class="nt">&quot;cO&quot;</span><span class="p">:</span> <span class="s2">&quot;setValue&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;30&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;intersection&quot;</span><span class="p">,</span>
             <span class="nt">&quot;cO&quot;</span><span class="p">:</span> <span class="s2">&quot;setValue&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
         <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 18: A command request message</p>
<p>The following table is describing the variable content of the message:</p>
<p>Values to send with the command (arguments)</p>
<div class="figure align-center" id="table-commands-argument">
<center><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>arg</td>
<td><em>(array)</em></td>
<td>Argument. Contains the element <strong>cCI</strong>, <strong>n</strong>, <strong>cO</strong>, <strong>v</strong> in an array</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.18:</strong> Command argument</span></p>
<span class="target" id="table-commands-argument"></span></center></div><p>The following table describes the variable content of the message which is
defined by the SXL.</p>
<p>The <em>SXL element</em> column describes the correlation between the JSon
elements and the titles in the signal exchange list (SXL).</p>
<div class="figure align-center" id="table-command-arguments-sxl">
<center><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="24%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>cCI</td>
<td>commandCodeId</td>
<td>The uniqe code of a command request.
The examples in this document are defined
according to the following format: <em>Myyy</em>,
where <em>yyy</em> is a unique number.</td>
</tr>
<tr class="row-odd"><td><em>(not sent)</em></td>
<td>Description</td>
<td>Description for the command request.
Defined in the SXL but is not actually
sent.</td>
</tr>
<tr class="row-even"><td>n</td>
<td>Name</td>
<td>Unique reference of the value</td>
</tr>
<tr class="row-odd"><td>cO</td>
<td>Command</td>
<td>Command</td>
</tr>
<tr class="row-even"><td><em>(not sent)</em></td>
<td>Type</td>
<td><p class="first">The data type of the value.
Defined in the SXL but is not actually sent</p>
<div class="last line-block">
<div class="line">General definition:</div>
<div class="line"><strong>string</strong>: Text information</div>
<div class="line"><strong>integer</strong>: Numerical value
(16-bit signed integer), [-32768 – 32767]</div>
<div class="line"><strong>long</strong>: Numerical value
(32-bit signed long)</div>
<div class="line"><strong>real</strong>: Float
(64-bit double precision floating point)</div>
<div class="line"><strong>boolean</strong>: Boolean data type</div>
<div class="line"><strong>base64</strong>: Binary data expressed in
base64 format according to RFC-4648</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>v</td>
<td>Value</td>
<td>Value</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.19:</strong> Command arguments defined by SXL</span></p>
<span class="target" id="table-command-arguments-sxl"></span></center></div><div class="section" id="structure-of-command-response-message">
<h4>4.4.4.1.1. Structure of command response message<a class="headerlink" href="#structure-of-command-response-message" title="Permalink to this headline">¶</a></h4>
<p>A command response message has the structure according to the example
below. A command response message informs about the updated value of the
requested object.
If the object is not known then the site must not disconnect
but instead answer with this type of message where <strong>age</strong> is set to
<strong>undefined</strong>.</p>
<div class="highlight-json notranslate" id="json-command-response"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;CommandResponse&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;0fd63726-be19-4c09-8553-48451735cb0b&quot;</span><span class="p">,</span>
     <span class="nt">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span><span class="p">,</span>
     <span class="nt">&quot;cTS&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-06-08T11:49:03.293Z&quot;</span><span class="p">,</span>
     <span class="nt">&quot;rvs&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;status&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;YellowFlash&quot;</span><span class="p">,</span>
             <span class="nt">&quot;age&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
          <span class="p">},{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;securityCode&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">,</span>
             <span class="nt">&quot;age&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
          <span class="p">},{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;timeout&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;30&quot;</span><span class="p">,</span>
             <span class="nt">&quot;age&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
          <span class="p">},{</span>
             <span class="nt">&quot;cCI&quot;</span><span class="p">:</span> <span class="s2">&quot;M0001&quot;</span><span class="p">,</span>
             <span class="nt">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;intersection&quot;</span><span class="p">,</span>
             <span class="nt">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
             <span class="nt">&quot;age&quot;</span><span class="p">:</span> <span class="s2">&quot;recent&quot;</span>
          <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 19: A command response message</p>
<p>The following table is describing the variable content of the message:</p>
<div class="figure align-center" id="table-command-response">
<center><table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="16%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>cTS</td>
<td><em>(timestamp)</em></td>
<td>The timestamp uses the W3C XML dateTime definition with a 3 decimal places.
All timestamps are set at the local level (and not in the supervision system) when
the alarm occurs (and not when the message is sent). All timestamps uses UTC.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.20:</strong> Command response</span></p>
<span class="target" id="table-command-response"></span></center></div></div>
<div class="section" id="id11">
<h4>4.4.4.1.2. Return values (returnvalue)<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>Return values (<strong>rvs</strong>) is always sent but can
be empty if not return values are defined.</p>
<div class="figure align-center" id="table-command-returnvalues-rvs">
<center><table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>rvs</td>
<td><em>(array)</em></td>
<td>Return values. Contains the elements <strong>cCI</strong>, <strong>v</strong>, <strong>n</strong> and <strong>q</strong> in an array.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.21:</strong> Command return values</span></p>
<span class="target" id="table-command-returnvalues-rvs"></span></center></div><p>The following table describes the variable content defined by the signal
exchange list (SXL). The <em>SXL element</em> column describes the correlation
between the JSon elements and the titles in the SXL.</p>
<div class="figure align-center" id="table-command-returnvalue-sxl">
<center><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="24%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>cCI</td>
<td>commandCodeId</td>
<td>The uniqe code of a command.
The examples in this document are defined
according to the following format: <em>Myyy</em>,
where <em>yyy</em> is a unique number.</td>
</tr>
<tr class="row-odd"><td>n</td>
<td>Name</td>
<td>Unique reference of the value</td>
</tr>
<tr class="row-even"><td><em>(not sent)</em></td>
<td>Type</td>
<td><p class="first">The data type of the value.
Defined in the SXL but is not actually sent</p>
<div class="last line-block">
<div class="line">General definition:</div>
<div class="line"><strong>string</strong>: Text information</div>
<div class="line"><strong>integer</strong>: Numerical value
(16-bit signed integer), [-32768 – 32767]</div>
<div class="line"><strong>long</strong>: Numerical value
(32-bit signed long)</div>
<div class="line"><strong>real</strong>: Float
(64-bit double precision floating point)</div>
<div class="line"><strong>boolean</strong>: Boolean data type</div>
<div class="line"><strong>base64</strong>: Binary data expressed in
base64 format according to RFC-4648</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>v</td>
<td>Value</td>
<td>Value</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.22:</strong> Command return value defined by SXL</span></p>
<span class="target" id="table-command-returnvalue-sxl"></span></center></div><p>The following table describes additional variable content of the message.</p>
<div class="figure align-center" id="table-command-returnvalue">
<center><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="24%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4">age</td>
<td>recent</td>
<td>The value is up to date</td>
</tr>
<tr class="row-odd"><td>old</td>
<td>The value is not up to date</td>
</tr>
<tr class="row-even"><td>undefined</td>
<td>The component does not exist.
<strong>v</strong> should be set to <strong>null</strong>.</td>
</tr>
<tr class="row-odd"><td>unknown</td>
<td>The value is unknown.
<strong>v</strong> should be set to <strong>null</strong>.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.23:</strong> Command return value</span></p>
<span class="target" id="table-command-returnvalue"></span></center></div></div>
</div>
<div class="section" id="message-exchange-between-site-and-supervision-system-other-equipment">
<h3>4.4.4.2. Message exchange between site and supervision system/other equipment<a class="headerlink" href="#message-exchange-between-site-and-supervision-system-other-equipment" title="Permalink to this headline">¶</a></h3>
<p>Message acknowledgement (see section <a class="reference internal" href="#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figure.</p>
<img alt="../_images/command_request_response.png" class="align-center" src="../_images/command_request_response.png" />
<ol class="arabic simple">
<li>Command request for an object</li>
<li>Command response of an object</li>
</ol>
</div>
</div>
<div class="section" id="message-acknowledgement">
<span id="id12"></span><h2>4.4.5. Message acknowledgement<a class="headerlink" href="#message-acknowledgement" title="Permalink to this headline">¶</a></h2>
<p>Message acknowledgement is sent as an initial answer to all other
messages. This type of message should not be mixed up with alarm
acknowledgement, which has a different function. The purpose of
message acknowledgement is to detect communication disruptions,
function as an acknowledgment that the message has reached its
destination and to verify that the message was understood.</p>
<p>There are two types of message acknowledgement – <strong>Message
acknowledgment</strong> (MessageAck) which confirms that the message was understood and
<strong>Message not acknowledged</strong> (MessageNotAck) which indicates that the message
was not understood.</p>
<ul class="simple">
<li>If no message acknowledgement is received within a predefined time, then
each communicating party should treat it as a communication disruption.
(See <a class="reference internal" href="transport_of_data.html#communication-disruption"><span class="std std-ref">Communication disruption</span></a>)</li>
<li>The default timeout value should be 30 seconds.</li>
<li>If the version messages has not been exchanged according to communication
establishment sequence
(See <a class="reference internal" href="transport_of_data.html#communication-establishment-between-sites-and-supervision-system"><span class="std std-ref">Communication establishment between sites and supervision system</span></a>
and <a class="reference internal" href="transport_of_data.html#communication-establishment-between-sites"><span class="std std-ref">Communication establishment between sites</span></a>) then
message acknowledgement (MessageAck/MessageNotAck) should not be sent as a
response to any other messages other than the version message
(See <a class="reference internal" href="#rsmpsxl-version"><span class="std std-ref">RSMP/SXL Version</span></a>). The lack of acknowledgement forces the other
communicating party to treat it as communication disruption and disconnect
and reconnect, ensuring that the connection restarts with communication
establishment sequence.</li>
</ul>
<p>The acknowledgement messages are interaction driven and are sent when
any other type message are received.</p>
<div class="section" id="message-structure-message-acknowledgement">
<h3>4.4.5.1. Message structure – Message acknowledgement<a class="headerlink" href="#message-structure-message-acknowledgement" title="Permalink to this headline">¶</a></h3>
<p>An acknowledgement message has the structure according to the example
below.</p>
<div class="highlight-json notranslate" id="json-ack"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;MessageAck&quot;</span><span class="p">,</span>
     <span class="nt">&quot;oMId&quot;</span><span class="p">:</span> <span class="s2">&quot;49c6c824-d593-4c16-b335-f04feda16986&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 20: An acknowledgement message</p>
</div>
<div class="section" id="message-structure-message-not-acknowledged">
<h3>4.4.5.2. Message structure – Message not acknowledged<a class="headerlink" href="#message-structure-message-not-acknowledged" title="Permalink to this headline">¶</a></h3>
<p>A “not acknowledgement” message has the structure according to the example
below.</p>
<div class="highlight-json notranslate" id="json-notack"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;MessageNotAck&quot;</span><span class="p">,</span>
     <span class="nt">&quot;oMId&quot;</span><span class="p">:</span> <span class="s2">&quot;554dff0-9cc5-4232-97a9-018d5796e86a&quot;</span><span class="p">,</span>
     <span class="nt">&quot;rea&quot;</span><span class="p">:</span> <span class="s2">&quot;Unknown packet type: Watchdddog&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 21: A not acknowledgement message</p>
<p>The following table is describing the variable content of the message:</p>
<div class="figure align-center" id="table-messagenoteack-basic">
<center><table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="11%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>rea</td>
<td><em>(optional)</em></td>
<td>Error message where all relevant information about the nature of the error can be provided.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.24:</strong> Message not ack</span></p>
<span class="target" id="table-messagenoteack-basic"></span></center></div></div>
<div class="section" id="id13">
<h3>4.4.5.3. Message exchange between site and supervision system/other equipment<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>Supervision system sends initial message</p>
<img alt="../_images/message_ack_system.png" class="align-center" src="../_images/message_ack_system.png" />
<ol class="arabic simple">
<li>A message is sent from supervision system or other equipment</li>
<li>The site responds with an message acknowledgement</li>
</ol>
<p>Site sends initial message</p>
<img alt="../_images/message_ack_site.png" class="align-center" src="../_images/message_ack_site.png" />
<ol class="arabic simple">
<li>A message is sent from the site</li>
<li>The supervision system or other equipment responds with an message acknowledgement</li>
</ol>
</div>
</div>
<div class="section" id="rsmp-sxl-version">
<span id="rsmpsxl-version"></span><h2>4.4.6. RSMP/SXL Version<a class="headerlink" href="#rsmp-sxl-version" title="Permalink to this headline">¶</a></h2>
<p>Version of RSMP and revision of SXL are always sent directly after
establishing communication. Both communicating systems send this as
their first message and waits for message response until any other
messages are sent. Information regarding all supported RSMP versions
should be included in the version message. The version message should
be implemented in such a way that is should be possible to add
additional tags/variables (e.g. date) without affecting existing
implementations.</p>
<p>If any discrepancies with the version numbers are detected between the
two communicating systems this should be set using a MessageNotAck.
The communication is terminated after that and an internal alarm is
activated in both communicating system. If both communicating systems
support several RSMP versions it is always the latest version that
should be used.</p>
<p>The principle of the message exchange is defined by the communication
establishment (See
<a class="reference internal" href="transport_of_data.html#communication-establishment-between-sites-and-supervision-system"><span class="std std-ref">Communication establishment between sites and supervision system</span></a>
and <a class="reference internal" href="transport_of_data.html#communication-establishment-between-sites"><span class="std std-ref">Communication establishment between sites</span></a>).</p>
<div class="section" id="id14">
<h3>4.4.6.1. Message structure<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>A version message has the structure according to the example below. In
the example below the system has support for RSMP version <strong>3.1.1</strong>,
<strong>3.1.2</strong> and SXL version <strong>1.0.13</strong> for site <strong>O+14439=481WA001</strong>.</p>
<div class="highlight-json notranslate" id="json-version"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Version&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;6f968141-4de5-42ff-8032-45f8093762c5&quot;</span><span class="p">,</span>
     <span class="nt">&quot;RSMP&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;vers&quot;</span><span class="p">:</span> <span class="s2">&quot;3.1.1&quot;</span>
         <span class="p">},{</span>
             <span class="nt">&quot;vers&quot;</span><span class="p">:</span> <span class="s2">&quot;3.1.2&quot;</span>
         <span class="p">}</span>
     <span class="p">],</span>
     <span class="nt">&quot;siteId&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="nt">&quot;sId&quot;</span><span class="p">:</span> <span class="s2">&quot;O+14439=481WA001&quot;</span>
         <span class="p">}</span>
     <span class="p">],</span>
     <span class="nt">&quot;SXL&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.13&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 22: A RSMP / SXL message</p>
<p>The following table describes the variable content of the message which is
defined by the SXL.</p>
<p>The <em>SXL element</em> column describes the correlation between the JSon
elements and the titles in the signal exchange list (SXL).</p>
<div class="figure align-center" id="table-version-basic-sxl">
<center><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="20%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">SXL element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sId</td>
<td>SiteId</td>
<td><p class="first">Site identity. Used in order to refer to a “logical” identity of a
site.</p>
<p>At the STA, the following formats can be used:</p>
<ul class="simple">
<li>The site id from the STAs component id standard TDOK 2012:1171
e.g. ”40100”.</li>
<li>It is also possible to use the full component id (TDOK 2012:1171)
of the grouped object in the site in case the site id part of
the component id is insufficient in order to uniquely identify a
site.</li>
</ul>
<p class="last">All the site ids that are used in the RSMP connection are sent
in the message using an array (<strong>siteId</strong>)</p>
</td>
</tr>
<tr class="row-odd"><td>SXL</td>
<td>SXL revision</td>
<td>Revision of SXL. E.g ”1.3”</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.25:</strong> Version information defined by SXL</span></p>
<span class="target" id="table-version-basic-sxl"></span></center></div><p>The following table describes additional variable content of the message.</p>
<div class="figure align-center" id="table-version-basic">
<center><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>vers</td>
<td>Version of RSMP. E.g. ”3.1.2”, ”3.1.3” or ”3.1.4”. All the supported RSMP versions are sent in the message using an array (<strong>RSMP</strong>).</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.26:</strong> Version information</span></p>
<span class="target" id="table-version-basic"></span></center></div></div>
</div>
<div class="section" id="watchdog">
<span id="id15"></span><h2>4.4.7. Watchdog<a class="headerlink" href="#watchdog" title="Permalink to this headline">¶</a></h2>
<p>The primary purpose of watchdog messages is to ensure that the
communication remains established and to detect any communication
disruptions between site and supervision system. For any subsystem
alarms are used instead.</p>
<p>The secondary purpose of watchdog messages is to provide a timestamp that can
be used for simple time synchronization.</p>
<ul class="simple">
<li>Time synchronization using the watchdog message should be configurable at the
site (enabled/disabled)</li>
<li>If time synchronization is enabled, the site should synchronize its clock
using the timestamp from watchdog messages – at communication establishment and
then at least once every 24 hours.</li>
<li>The interval duration for sending watchdog messages should be
configurable at both the site and the supervision system. The default
setting should be (1) once a minute.</li>
</ul>
<p>Watchdog messages are sent in both directions, both from the site and
from the supervision system. At initial communication establishment
(after version message) the watchdog message should be sent.</p>
<div class="section" id="id16">
<h3>4.4.7.1. Message structure<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>A watchdog message has the structure according to the example below.</p>
<div class="highlight-json notranslate" id="json-watchdog"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="nt">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Watchdog&quot;</span><span class="p">,</span>
     <span class="nt">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;f48900bc-e6fb-431a-8ca4-05070016f64a&quot;</span><span class="p">,</span>
     <span class="nt">&quot;wTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-06-08T12:01:39.654Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>JSon code 23: A watchdog message</p>
<p>The following table is describing the variable content of the message:</p>
<div class="figure align-center" id="table-watchdog-basic">
<center><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="18%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>wTs</td>
<td><em>(timestamp)</em></td>
<td>Watchdog timestamp.
The timestamp uses the W3C XML dateTime
definition with a 3 decimal places. All
timestamps are set at the local level
(and not in the supervision system) when
the event occurs (and not when the
message is sent). All timestamps uses UTC.</td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text"><strong>Figure 4.27:</strong> Watchdog</span></p>
<span class="target" id="table-watchdog-basic"></span></center></div></div>
<div class="section" id="id17">
<h3>4.4.7.2. Message exchange between site and supervision system/other equipment<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p>Message acknowledgement (see section <a class="reference internal" href="#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figures.</p>
<p>Site sends watchdog message</p>
<img alt="../_images/watchdog_site.png" src="../_images/watchdog_site.png" />
<ol class="arabic simple">
<li>Watchdog message is sent from site</li>
</ol>
<p>Supervision system/other equipment sends watchdog message</p>
<img alt="../_images/watchdog_system.png" src="../_images/watchdog_system.png" />
<ol class="arabic simple">
<li>Watchdog message is sent from supervision system/other equipment</li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../changelog.html" class="btn btn-neutral float-right" title="5. Change log" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="transport_of_data.html" class="btn btn-neutral float-left" title="4.3. Transport of data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>