<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.3. Transport of data &mdash; RSMP Specification 3.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.4. Basic structure" href="basic_structure.html" />
    <link rel="prev" title="4.2. Object model" href="object_model.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> RSMP Specification
          </a>
              <div class="version">
                3.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../definitions.html">1. Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">2. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../purpose.html">3. Purpose</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../applicability.html">4. Applicability</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scope.html">4.1. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="object_model.html">4.2. Object model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.3. Transport of data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multiple-supervisors">4.3.1. Multiple supervisors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security">4.3.2. Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#communication-establishment-between-sites-and-supervision-system">4.3.3. Communication establishment between sites and supervision system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#communication-establishment-between-sites">4.3.4. Communication establishment between sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#communication-rejection">4.3.5. Communication rejection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#communication-disruption">4.3.6. Communication disruption</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wrapping-of-packets">4.3.7. Wrapping of packets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transport-between-site-and-supervision-system">4.3.8. Transport between site and supervision system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transport-between-sites">4.3.9. Transport between sites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="basic_structure.html">4.4. Basic structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="sxl.html">4.5. Signal Exchange List</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">5. Change log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RSMP Specification</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../applicability.html"><span class="section-number">4. </span>Applicability</a> &raquo;</li>
      <li><span class="section-number">4.3. </span>Transport of data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/applicability/transport_of_data.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="transport-of-data">
<span id="id1"></span><h1><span class="section-number">4.3. </span>Transport of data<a class="headerlink" href="#transport-of-data" title="Permalink to this headline"></a></h1>
<p>The message flow is different between different types of messages.
Some message types are event driven and are sent without a request (push),
while others are interaction driven, i.e. they sent in response to a
request from a host system or other system (client-server).</p>
<p>To ensure that messages reach their destinations a message acknowledgment
is sent for all messages. This gives the application a simple way to
follow up on the message exchange.</p>
<p>To communicate between sites and supervision systems a pure TCP connection
is used (TCP/IP), and the data sent is based on the JSon format, i.e.
formatted text.</p>
<p>Messages can be sent asynchronously, i.e. while the site or supervision
system is waiting for an answer to a previously sent message it can
can continue to send messages. The exception is during the first part of
communication establishment (see section <a class="reference internal" href="#communication-establishment-between-sites-and-supervision-system"><span class="std std-ref">Communication establishment between sites and supervision system</span></a>
and <a class="reference internal" href="#communication-establishment-between-sites"><span class="std std-ref">Communication establishment between sites</span></a>).</p>
<p>RSMP connections can be established:</p>
<ul class="simple">
<li><p>Between site and supervision system.
See <a class="reference internal" href="#communication-establishment-between-sites-and-supervision-system"><span class="std std-ref">communication establishment between sites and supervision system</span></a>.
The site needs to support multiple RSMP connections to different
supervisors. See <a class="reference internal" href="#multiple-supervisors"><span class="std std-ref">Multiple supervisors</span></a>.</p></li>
<li><p>Directly between sites.
See <a class="reference internal" href="#communication-establishment-between-sites"><span class="std std-ref">communication establishment between sites</span></a>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Implementing support for communication between sites is not required unless
otherwise stated in the <a class="reference internal" href="../definitions.html#term-SXL"><span class="xref std std-term">SXL</span></a>.</p>
</div>
<section id="multiple-supervisors">
<span id="id2"></span><h2><span class="section-number">4.3.1. </span>Multiple supervisors<a class="headerlink" href="#multiple-supervisors" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Implementing support for multiple supervisors is not required unless
otherwise stated in the <a class="reference internal" href="../definitions.html#term-SXL"><span class="xref std std-term">SXL</span></a>.</p>
</div>
<p>Each site needs to support the following:</p>
<ul class="simple">
<li><p>It must be possible to configure the list of supervisors as part of the
RSMP configuration in the site. In the configuration, supervisors are
identified by their IP addresses.</p></li>
<li><p>It must be possible to configure supervisors as primary or secondary.</p></li>
<li><p>There can be multiple secondary supervisors, but only one primary.</p></li>
<li><p>A secondary supervisor does not recieve alarms.</p></li>
<li><p>A secondary supervisor receives aggregated status and can request,
subscribe and receive statuses.</p></li>
<li><p>Watchdog messages from a secondary supervisor does not adjust the clock.
See section <a class="reference internal" href="basic_structure.html#watchdog"><span class="std std-ref">Watchdog</span></a>.</p></li>
<li><p>Except from not sending alarms to secondary supervisors, a site must
handle all types of message from all supervisors, including command requests,
status requests and status subscriptions. Commands from multiple supervisors
are served on a first-come basis, without any concept of priority.</p></li>
<li><p>Supervisor connections are handled separately. When a supervisor sends a
command or status request, the response is send only to that particular
supervisor.</p></li>
</ul>
</section>
<section id="security">
<h2><span class="section-number">4.3.2. </span>Security<a class="headerlink" href="#security" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Implementing support for encryption is not required unless otherwise stated.</p>
</div>
<p>If encryption is used then the following applies:</p>
<ul class="simple">
<li><p>Encryption settings needs to be configurable in both the supervision system as
well as the site.</p></li>
<li><p>For the encrypted communication, SSL 3.0/TLS 1.0 or later is used.</p></li>
<li><p>Certificates should be used to verify the identities of equipments.</p></li>
<li><p>Equipment which uses RSMP should contain a user interface for easy management
of certificates.</p></li>
<li><p>The issuing and renewal of certificates should should be made in cooperation
with the purchaser unless other arrangement is agreed upon.</p></li>
</ul>
</section>
<section id="communication-establishment-between-sites-and-supervision-system">
<span id="id3"></span><h2><span class="section-number">4.3.3. </span>Communication establishment between sites and supervision system<a class="headerlink" href="#communication-establishment-between-sites-and-supervision-system" title="Permalink to this headline"></a></h2>
<p>When establishing communication between sites and supervision system,
messages are sent in the following order.</p>
<p>Message acknowledgement (see section <a class="reference internal" href="basic_structure.html#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figure.</p>
<img alt="../_images/establish-site-system.png" class="align-center" src="../_images/establish-site-system.png" />
<ol class="arabic simple">
<li><p>Site sends RSMP / SXL version (according to section <a class="reference internal" href="basic_structure.html#rsmpsxl-version"><span class="std std-ref">RSMP/SXL Version</span></a>).</p></li>
<li><p>The supervision system verifies the RSMP version, SXL version and site id.
If there is a mismatch the sequence does not proceed.
(see section <a class="reference internal" href="#communication-rejection"><span class="std std-ref">Communication rejection</span></a>)</p></li>
<li><p>The supervision system sends RSMP / SXL version (according to section
<a class="reference internal" href="basic_structure.html#rsmpsxl-version"><span class="std std-ref">RSMP/SXL Version</span></a>).</p></li>
<li><p>The site verifies the RSMP version, SXL version and site id.
If there is a mismatch the sequence does not proceed.
(see section <a class="reference internal" href="#communication-rejection"><span class="std std-ref">Communication rejection</span></a>)</p></li>
<li><p>The latest version of RSMP that both communicating parties exchange in the
RSMP/SXL Version is implicitly selected and used in any further RSMP
communication.</p></li>
<li><p>The site sends a Watchdog (according to section <a class="reference internal" href="basic_structure.html#watchdog"><span class="std std-ref">Watchdog</span></a>)</p></li>
<li><p>The system sends a Watchdog (according to section <a class="reference internal" href="basic_structure.html#watchdog"><span class="std std-ref">Watchdog</span></a>)</p></li>
<li><p>Asynchronous message exchange can begin. This means that commands and
statuses are allowed to be sent</p></li>
<li><p>Aggregated status (according to section <a class="reference internal" href="basic_structure.html#aggregated-status-message"><span class="std std-ref">Aggregated status message</span></a>).
If no object for aggregated status is defined in the signal exchange list
then no aggregated status message is sent.</p></li>
<li><p>All alarms (including active, inactive, suspended, unsuspended and acknowledged)
are sent. (according to section <a class="reference internal" href="basic_structure.html#alarm-messages"><span class="std std-ref">Alarm messages</span></a>).</p></li>
<li><p>Buffered messages in the equipment’s outgoing communication buffer are sent,
including alarms, aggregated status and status updates.</p></li>
</ol>
<p>The reason for sending all alarms including inactive ones is because alarms
might otherwise incorrectly remain active in the supervision system if the alarm
is reset and not saved in communication buffer if the equipment is restarted or
replaced.</p>
<p>The reason for sending buffered alarms is for the supervision system to receive
all historical alarm events. The buffered alarms can be distinguished from the
current ones based on their older alarm timestamps. Any buffered alarm events
that contains the exact same alarm event and timestamp as sent when sending all
alarms should not be sent again.</p>
<p>Since only one version of the signal exchange list is allowed to be used
at the communication establishment (according to the version message),
each connected site must either:</p>
<ul class="simple">
<li><p>Use the same version of the signal exchange list via the same
RSMP connection</p></li>
<li><p>Connect to separate supervision systems (e.g. using separate ports)</p></li>
<li><p>Connect to a supervision system that can handle separate signal exchange
lists depending on the RSMP / SXL version message from the site</p></li>
</ul>
</section>
<section id="communication-establishment-between-sites">
<span id="id4"></span><h2><span class="section-number">4.3.4. </span>Communication establishment between sites<a class="headerlink" href="#communication-establishment-between-sites" title="Permalink to this headline"></a></h2>
<p>When establishing communication directly between sites, messages are sent in
the following order.</p>
<p>One site acts as a leader and the other one as a follower.</p>
<p>When establishing communication between sites, messages are sent in the
following order.</p>
<p>Message acknowledgement (see section <a class="reference internal" href="basic_structure.html#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>) is
implicit in the following figure.</p>
<img alt="../_images/establish-site-site.png" class="align-center" src="../_images/establish-site-site.png" />
<ol class="arabic simple">
<li><p>The follower site sends RSMP / SXL version (according to section
<a class="reference internal" href="basic_structure.html#rsmpsxl-version"><span class="std std-ref">RSMP/SXL Version</span></a>).</p></li>
<li><p>The leader site verifies the RSMP version, SXL version and site id.
If there is a mismatch the sequence does not proceed.
(see section <a class="reference internal" href="#communication-rejection"><span class="std std-ref">Communication rejection</span></a>)</p></li>
<li><p>The leader site sends RSMP / SXL version (according to section
<a class="reference internal" href="basic_structure.html#rsmpsxl-version"><span class="std std-ref">RSMP/SXL Version</span></a>).</p></li>
<li><p>The follower site verifies the RSMP version, SXL version and site id.
If there is a mismatch the sequence does not proceed.
(see section <a class="reference internal" href="#communication-rejection"><span class="std std-ref">Communication rejection</span></a>)</p></li>
<li><p>The latest version of RSMP that both communicating parties exchange in the
RSMP/SXL Version is implicitly selected and used in any further RSMP
communication.</p></li>
<li><p>The follower site sends Watchdog (according to section <a class="reference internal" href="basic_structure.html#watchdog"><span class="std std-ref">Watchdog</span></a>)</p></li>
<li><p>The leader site sends Watchdog (according to section <a class="reference internal" href="basic_structure.html#watchdog"><span class="std std-ref">Watchdog</span></a>)</p></li>
<li><p>Asynchronous message exchange can begin. This means that commands and
statuses are allowed to be sent</p></li>
<li><p>Aggregated status (according to section <a class="reference internal" href="basic_structure.html#aggregated-status-message"><span class="std std-ref">Aggregated status message</span></a>)
If no object for aggregated status is defined in the signal exchange list
then no aggregated status message is sent.</p></li>
</ol>
<p>For communication between sites the following applies:</p>
<ul class="simple">
<li><p>The SXL used is the SXL of the follower site</p></li>
<li><p>The site id (siteId) which is sent in RSMP / SXL version is the
follower site’s site id</p></li>
<li><p>If the site id does not match with the expected site id the connection
should be terminated. The purpose is to reduce the risk of establishing
connection with the wrong site</p></li>
<li><p>The component id which is used in all messages is the follower site’s
component id</p></li>
<li><p>Watchdog messages does not adjust the clock. See section <a class="reference internal" href="basic_structure.html#watchdog"><span class="std std-ref">Watchdog</span></a>.</p></li>
<li><p>Alarm messages are not sent</p></li>
<li><p>No communication buffer exist</p></li>
</ul>
</section>
<section id="communication-rejection">
<span id="id5"></span><h2><span class="section-number">4.3.5. </span>Communication rejection<a class="headerlink" href="#communication-rejection" title="Permalink to this headline"></a></h2>
<p>During RSMP/SXL Version exchange each communicating party needs to verify:</p>
<ul class="simple">
<li><p>RSMP version(s)</p></li>
<li><p>SXL version</p></li>
<li><p>Site id</p></li>
</ul>
<p>If there is a mismatch of SXL, Site id or unsupported version(s) of RSMP then:</p>
<ol class="arabic simple">
<li><p>The communication establishment sequence does not proceed</p></li>
<li><p>The receiver of the RSMP/SXL version message sends a MessageNotAck with
reason (<cite>rea</cite>) set to the cause of rejection. For instance,
<code class="docutils literal notranslate"><span class="pre">RSMP</span> <span class="pre">versions</span> <span class="pre">[3.1.5]</span> <span class="pre">requested,</span> <span class="pre">but</span> <span class="pre">only</span> <span class="pre">[3.1.1,3.1.2,3.1.3,3.1.4]</span> <span class="pre">supported</span></code></p></li>
<li><p>The connection is closed</p></li>
</ol>
<img alt="../_images/communication-rejection.png" class="align-center" src="../_images/communication-rejection.png" />
</section>
<section id="communication-disruption">
<span id="id6"></span><h2><span class="section-number">4.3.6. </span>Communication disruption<a class="headerlink" href="#communication-disruption" title="Permalink to this headline"></a></h2>
<p>In the event of an communication disruption the following principles applies:</p>
<ul class="simple">
<li><p>If the equipment supports buffering of status messages, the status
subscriptions remains active regardless of communication disruption and the
status updates are stored in the equipment’s outgoing communication buffer.</p></li>
<li><p>Active subscriptions to status messages which does not support buffering
ceases if communication disruption occurs.</p></li>
<li><p>Active subscriptions to status messages ceases if the equipment restarts.</p></li>
<li><p>Once communication is restored all the buffered messages are sent according to
the communication establishment sequence.</p></li>
<li><p>When sending buffered status messages, the <code class="docutils literal notranslate"><span class="pre">q</span></code> field should be set to <code class="docutils literal notranslate"><span class="pre">old</span></code></p></li>
<li><p>The communication buffer is stored and sent using the FIFO principle.</p></li>
<li><p>In the event of communications failure or power outage the contents of the
outgoing communication buffer must not be lost.</p></li>
<li><p>The internal communication buffer of the device must at a minimum be
sized to be able to store 10000 messages.</p></li>
</ul>
<p>The following message types should be buffered in the equipment’s outgoing
communication buffer in the event of an communication disruption.</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-number">Table 4.1 </span><span class="caption-text">Message types that should be buffered</span><a class="headerlink" href="#id7" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Message type</p></th>
<th class="head"><p>Buffered during communication outage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Alarm messages</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>Aggregated status</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>Status messages</p></td>
<td><p>Configurable</p></td>
</tr>
<tr class="row-odd"><td><p>Command messages</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>Version messages</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>Watchdog messages</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>MessageAck</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
<p>The following configuration options should exist at the site:</p>
<ul class="simple">
<li><p>It should be possible configure which status messages that will be buffered
during communication outage</p></li>
<li><p>The site should try to reconnect to the supervision system/other site
during communications failure (yes/no). This configuration option should
be activated by default unless anything else is agreed upon.</p></li>
<li><p>The reconnect interval should be configurable. The default value should
be 10 seconds.</p></li>
</ul>
</section>
<section id="wrapping-of-packets">
<h2><span class="section-number">4.3.7. </span>Wrapping of packets<a class="headerlink" href="#wrapping-of-packets" title="Permalink to this headline"></a></h2>
<p>Both Json and XML packets can be tricky to decode unless one always know that
the packet is complete. Json lacks an end tag and an XML end tag may be
embedded in the text source. In order to reliably detect the end of a packet
one must therefore make an own parser of perform tricks in the code, which is
not very good.</p>
<p>Both Json and XML could contain tab characters (0x09), CR (0x0d) and LF (0x0a).
If the packets are serialized using .NET those special characters does not
exist. Therefore it is a good practice to use formfeed (0x0c), e.g. ’f’
in C/C++/C#. Formfeed won’t be embedded in in the packets so the parser only
needs to search the incoming buffer for 0x0c and deal with every packet.</p>
<p>Example of wrapping of a packet:</p>
<div class="highlight-default notranslate" id="json-wrapping"><div class="highlight"><pre><span></span> <span class="p">{</span>
     <span class="s2">&quot;mType&quot;</span><span class="p">:</span> <span class="s2">&quot;rSMsg&quot;</span><span class="p">,</span>
     <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Alarm&quot;</span><span class="p">,</span>
     <span class="s2">&quot;mId&quot;</span><span class="p">:</span> <span class="s2">&quot;d2e9a9a1-a082-44f5-b4e0-6c9233-a204c&quot;</span><span class="p">,</span>
     <span class="s2">&quot;ntsOId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+81102=881WA001&quot;</span><span class="p">,</span>
     <span class="s2">&quot;xNId&quot;</span><span class="p">:</span> <span class="s2">&quot;23055&quot;</span><span class="p">,</span>
     <span class="s2">&quot;cId&quot;</span><span class="p">:</span> <span class="s2">&quot;AB+81102=881WA001&quot;</span><span class="p">,</span>
     <span class="s2">&quot;aCId&quot;</span><span class="p">:</span> <span class="s2">&quot;A001&quot;</span><span class="p">,</span>
     <span class="s2">&quot;xACId&quot;</span><span class="p">:</span> <span class="s2">&quot;Lamp error #14&quot;</span><span class="p">,</span>
     <span class="s2">&quot;xNACId&quot;</span><span class="p">:</span> <span class="s2">&quot;3052&quot;</span><span class="p">,</span>
     <span class="s2">&quot;aSp&quot;</span><span class="p">:</span> <span class="s2">&quot;acknowledge&quot;</span><span class="p">,</span>
     <span class="s2">&quot;ack&quot;</span><span class="p">:</span> <span class="s2">&quot;Acknowledged&quot;</span><span class="p">,</span>
     <span class="s2">&quot;aS&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span>
     <span class="s2">&quot;sS&quot;</span><span class="p">,</span> <span class="s2">&quot;notSuspended&quot;</span><span class="p">,</span>
     <span class="s2">&quot;aTs&quot;</span><span class="p">:</span> <span class="s2">&quot;2009-10-02T14:34:34.345Z&quot;</span><span class="p">,</span>
     <span class="s2">&quot;cat&quot;</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span>
     <span class="s2">&quot;pri&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
     <span class="s2">&quot;rvs&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="s2">&quot;color&quot;</span><span class="p">,</span>
          <span class="s2">&quot;v&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span>
      <span class="p">}]</span>
 <span class="p">}</span><span class="o">&lt;</span><span class="mh">0x0c</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>JSon code 1: An RSMP message with wrapping</p>
<p>The characters between &lt;&gt; is the bytes binary content in hex (ASCII code),
ex &lt;0x0c&gt; is ASCII code 12, e.g. FF (formfeed).</p>
<p>The following principles applies:</p>
<ul class="simple">
<li><p>All packets must be ended with a FF (formeed). This includes message
acknowledgement (see section <a class="reference internal" href="basic_structure.html#message-acknowledgement"><span class="std std-ref">Message acknowledgement</span></a>).
For example if NotAck is used as a consequence for signal exchange list
mismatch during communication establishment</p></li>
<li><p>Several consecutive FF (formeed) must not be sent, but must be handled</p></li>
<li><p>FF (formeed) in the beginning of the data exchange (after connection
establishment) must not be sent, but must be handled</p></li>
</ul>
</section>
<section id="transport-between-site-and-supervision-system">
<h2><span class="section-number">4.3.8. </span>Transport between site and supervision system<a class="headerlink" href="#transport-between-site-and-supervision-system" title="Permalink to this headline"></a></h2>
<p>Supervision system acts a socket server and waits for the site to
connect. If the communication were to fail it is the site’s
responsibility to reconnect.</p>
</section>
<section id="transport-between-sites">
<h2><span class="section-number">4.3.9. </span>Transport between sites<a class="headerlink" href="#transport-between-sites" title="Permalink to this headline"></a></h2>
<p>One site acts as leader and the other one as a follower.</p>
<ul class="simple">
<li><p>The leader site initiates the connection to the following site.</p></li>
<li><p>The follower sites implements a socket server and waits for the leader site
to connect.</p></li>
<li><p>If the communication were to fail it is the follower site’s responsibility
to reconnect.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="object_model.html" class="btn btn-neutral float-left" title="4.2. Object model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="basic_structure.html" class="btn btn-neutral float-right" title="4.4. Basic structure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright RSMP Nordic.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>